#!/usr/bin/env ruby
# frozen_string_literal: true

# Omarchy installer (Ruby wrapper for bash scripts)

require 'english'

def run!(*cmd)
  cmd = cmd.flatten
  puts "â–¶ Executing: #{cmd.join(' ')}"
  system(*cmd)
  status = $CHILD_STATUS&.exitstatus
  if status != 0
    warn "âœ– Failed (exit #{status}): #{cmd.join(' ')}"
    exit(status || 1)
  end
end

puts "ðŸš€ [Omarchy] Start"

script_dir = File.expand_path(__dir__)

run! 'bash', File.join(script_dir, 'install-packages')
run! 'bash', File.join(script_dir, 'install-middleware')
run! 'bash', File.join(script_dir, 'install-dotfiles')
run! 'bash', File.join(script_dir, 'install-hyprland-overrides')

run! 'bash', File.join(script_dir, 'setup-pacakges')

puts "ðŸŽ‰ [Omarchy] Completed"

